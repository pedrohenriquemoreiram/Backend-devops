# Backend DevOps - FastAPI + PostgreSQL

Este repositÃ³rio contÃ©m a aplicaÃ§Ã£o backend desenvolvida com [FastAPI](https://fastapi.tiangolo.com/) que realiza a conexÃ£o com um banco de dados PostgreSQL dentro de um cluster Kubernetes.

## ğŸ”§ Tecnologias Utilizadas

- Python 3.11
- FastAPI
- PostgreSQL
- SQLAlchemy
- Docker
- Kubernetes (com `Deployment` e `Service`)
- ArgoCD (para GitOps)

## ğŸ“¦ Endpoints DisponÃ­veis

- `GET /` â€” Teste de conexÃ£o com o banco PostgreSQL.
- `GET /db` â€” Retorna um JSON confirmando se a conexÃ£o estÃ¡ ativa.

## âš™ï¸ VariÃ¡veis de Ambiente

A URL de conexÃ£o com o banco deve ser fornecida pela variÃ¡vel `DATABASE_URL`, por exemplo: postgresql://admin:admin123@postgres:5432/meubanco

## ğŸš€ Deploy com Kubernetes

O backend Ã© empacotado como um container Docker e implantado no Kubernetes com os seguintes arquivos:

- `deployment.yaml`: Define o pod com a imagem do backend.
- `service.yaml`: ExpÃµe o backend via NodePort na porta `8181`.
- `kustomization.yaml`: Gerencia os manifests para aplicar com Kustomize.

### ğŸ” Aplicar no cluster:

```bash
kubectl apply -k k8s/

docker build -t pedrohenriquesc/backend .
docker push pedrohenriquesc/backend
kubectl rollout restart deployment backend



### CORS ATIVADO
allow_origins=["http://192.168.1.60:8282"]


ğŸ“‚ OrganizaÃ§Ã£o
â”œâ”€â”€ k8s/
â”‚   â”œâ”€â”€ deployment.yaml
â”‚   â”œâ”€â”€ service.yaml
â”‚   â””â”€â”€ kustomization.yaml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ main.py
